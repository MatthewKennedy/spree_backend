<%= render partial: 'spree/admin/shared/error_messages', locals: { target: @product } %>

<% content_for :page_title do %>
  <%= link_to Spree.t(:products), spree.admin_products_url %> / <%= Spree.t(:new_product) %>
<% end %>

<div class="card">
  <div class="card-header">
    <h5 class="card-title">
      <%= I18n.t('spree.dash.products.new_product_details') %>
    </h5>
  </div>
  <div class="card-body">
    <%= form_with model: [:admin, @product], method: :post, class: 'row', data: { hook: 'new_product_form' } do |f| %>
      <div class="col-12 col-md-6">
        <%= f.field_container :name, data: { hook: "admin_product_form_name" } do %>
          <%= f.text_field :name, class: 'form-control title', placeholder: raw(Spree.t(:name) + required_span_tag), required: true %>
          <%= f.label :name, raw(Spree.t(:name) + required_span_tag) %>
        <% end %>
      </div>

      <div class="col-12 col-md-3">
        <%= f.field_container :price, data: { hook: "new_product_price" } do %>
          <%= f.text_field :price, value: number_to_currency(@product.price, unit: ''), class: 'form-control', required: :required, placeholder: raw(I18n.t('spree.dash.products.new_product_master_price', currency_symbol: currency_symbol(current_currency) ,currency_iso: current_currency ) + required_span_tag) %>
          <%= f.label :price, raw(I18n.t('spree.dash.products.new_product_master_price', currency_symbol: currency_symbol(current_currency) ,currency_iso: current_currency ) + required_span_tag) %>
        <% end %>
      </div>

      <div class="col-12 col-md-3">
        <%= f.field_container :shipping_category, data: { hook: "new_product_shipping_category" } do %>
          <%= f.collection_select(:shipping_category_id, @shipping_categories, :id, :name, { selected: @product.shipping_category_id }, { class: 'form-control', data: {controller: 'ts--select'} }) %>
          <%= f.label :shipping_category_id, raw(Spree.t(:shipping_categories) + required_span_tag) %>
        <% end %>
      </div>

      <% unless @product.has_variants? %>
        <div class="col-12 col-md-6">
          <%= f.field_container :sku, data: { hook: "new_product_sku" } do %>
            <%= f.text_field :sku, size: 16, class: 'form-control', placeholder: Spree.t(:sku) %>
            <%= f.label :sku, Spree.t(:sku) %>
          <% end %>
        </div>
      <% end %>

      <div class="col-12 col-md-6">
        <%= f.field_container :prototype, data: { hook: "new_product_prototype" } do %>
          <%= f.collection_select :prototype_id, Spree::Prototype.all, :id, :name, { include_blank: true }, { class: 'form-select', data: { controller: 'ts--select' } } %>
          <%= f.label :prototype_id, Spree.t(:prototype) %>
        <% end %>
      </div>

      <%= render partial: 'spree/admin/shared/new_resource_links' %>
    <% end %>
  </div>
</div>
