<% content_for :page_title do %>
  <%= link_to Spree.t(:option_types), spree.admin_option_types_url %> /
  <%= @option_type.name %>
<% end %>

<% content_for :page_actions do %>
  <span id="new_add_option_value" data-hook>
    <%= button_link_to Spree.t(:add_option_value), "javascript:;", { icon: 'plus-square.svg', :'data-target' => "tbody#sortVert", class: 'btn-success  spree_add_fields' } %>
  </span>
<% end %>

<%= form_for [:admin, @option_type] do |f| %>
  <div class="card mb-3">
    <div class="card-body">
      <%= render 'form', f: f %>
    </div>
    <div class="card-body">
      <% if @option_type.option_values.any? %>
        <div class="table-responsive border rounded bg-white">
          <table class="table table-condensed sortable">
            <thead data-hook="option_header">
              <tr>
                <th colspan="2"><%= raw(Spree.t(:name) + required_span_tag) %></th>
                <th><%= raw(Spree.t(:display) + required_span_tag) %></th>
                <th class="actions"></th>
              </tr>
            </thead>
            <tbody data-controller="sortable"
                   data-sortable-handle-value=".handle"
                   data-sortable-resource-name-value="option_value">
              <%= f.fields_for :option_values do |option_value_form| %>
                <%= render partial: 'option_value_fields', locals: { f: option_value_form } %>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <div class="alert alert-info text-center" role="alert">
          <span>No values, click add option value to add.</span>
        </div>
      <% end %>
    </div>
    <div class="card-footer text-center">
      <%= render partial: 'spree/admin/shared/edit_resource_links' %>
    </div>
  </div>
<% end %>
