.flatpickr-calendar {
  // Custom Flatpickr styling for Spree + BS4.
  .flatpickr-current-month {
    span.cur-month:hover {
      background: transparent;
    }
    .numInputWrapper {
      margin-left: 3px;
      border-radius: var(--bs-border-radius);
      overflow: hidden;
    }

    .flatpickr-monthDropdown-months {
      @include prefix(
        (
          appearance: none
        ),
        webkit moz ms khtml
      );

      padding: 0.2em;
      border-radius: var(--bs-border-radius);
    }
  }

  .numInputWrapper span.arrowUp {
    border-color: transparent;
    border-radius: 0;
  }

  .numInputWrapper span.arrowDown {
    border-color: transparent;
    border-radius: 0;
  }

  .flatpickr-day {
    margin: 2px 0;
    border-radius: var(--bs-border-radius);
  }

  .flatpickr-months .flatpickr-prev-month:hover svg,
  .flatpickr-months .flatpickr-next-month:hover svg {
    fill: var(--bs-primary);
  }

  .flatpickr-time {
    border-radius: 0 0 5px 5px;
    &:after {
      display: none;
    }
    .numInputWrapper {
      span {
        border-color: transparent;
        border-radius: 0;
      }
    }
  }

  // Required to stop an opened cal showing above the nav bar.
  &.open {
    z-index: $zindex-dropdown;
  }
}

// Mixins for calendar toggle icon show/hide.
@mixin swith-appended-icon {
  &:placeholder-shown:not(:focus) + * {
    @content;
  }
}

[data-controller="datepicker"] {
  input.flatpickr-alt-input[readonly] {
    // Flatpickr alternate input is read-only,
    // style it as an active input field.
    background-color: var(--bs-body-bg) !important;

    // Fix a bug where occasionally the whole screen will highlight
    // if you clicked the Flatpickr input box while moving the cursor.
    @include prefix(
      (
        appearance: none,
        touch-callout: none,
        user-select: none
      ),
      webkit moz ms khtml
    );

    @include swith-appended-icon {
      opacity: 0;
    }
  }

  // Required for calendar toggle icon show/hide.
  .append_over {
    position: absolute;
    right: 0;
    top: 0;
    z-index: 1;
    height: 100%;
  }
}
